
<div class="ecl-container ecl-u-mt-m avs-content-wrapper">   

    <div class="avs-schedule-heading ecl-u-mb-s">

    <div class="ecl-u-clearfix ecl-u-d-flex ecl-u-align-items-center">

        <h1 class="ecl-heading ecl-heading--h1 ecl-u-mb-none ebs-color" ng-if="search.channel == 1">{{'menu.ebs_schedule' | translate}}</h1>
        <h1 class="ecl-heading ecl-heading--h1 ecl-u-mb-none ebs-plus-color" ng-if="search.channel == 2">{{'menu.ebs_plus_schedule' | translate}}</h1>

        <a ng-href="http://ec.europa.eu/avservices/rss/ebs/?date={{search.daterss}}" target="rss" class="avs-link-with-icon ecl-u-mr-s ecl-u-mr-md-auto ecl-u-mr-lg-auto ecl-link--standalone ecl-u-fs-s ecl-heading--h3 ecl-u-pv-xxs ecl-u-mv-none ecl-u-ml-s" ng-if="search.channel == 1"><strong>RSS</strong><span class="ecl-icon ecl-icon--rss avs-bg-orange-rss ecl-u-ml-xxxs ecl-u-pv-xxxs ecl-u-ph-xxxs ecl-u-fs-s ecl-u-color-white ecl-u-mr-xxxs"></span></a>
        <a ng-href="http://ec.europa.eu/avservices/rss/ebsplus/?date={{search.daterss}}" target="rss" class="avs-link-with-icon ecl-u-mr-s ecl-u-mr-md-auto ecl-u-mr-lg-auto ecl-link--standalone ecl-u-fs-s ecl-heading--h3 ecl-u-pv-xxs ecl-u-mv-none ecl-u-ml-s"  ng-if="search.channel == 2"><strong>RSS</strong><span class="ecl-icon ecl-icon--rss avs-bg-orange-rss ecl-u-ml-xxxs ecl-u-pv-xxxs ecl-u-ph-xxxs ecl-u-fs-s ecl-u-color-white ecl-u-mr-xxxs"></span></a>

        <a ng-click="toggleIframe(true)" class="ecl-link--standalone ecl-u-fs-m ecl-u-f-r avs-color-black ecl-u-bg-secondary ecl-u-pv-xxs ecl-u-ph-xs"><strong ng-if="search.channel == 1">{{'ebs.watch_ebs_live' | translate}}</strong> <strong ng-if="search.channel == 2" >{{'ebs.watch_ebs_plus_live'|translate}}</strong> <span class="ecl-icon ecl-u-ml-xxxs ecl-icon--right ecl-u-fs-s"></span></a>

    </div>
</div>    
<div class="avs-slider-date">
	<data-owl-carousel class="owl-carousel avs-bg-blue-25 ecl-u-mb-s" data-options="">
      <a owl-carousel-item="" class="ecl-u-pv-xxs ecl-u-d-block ecl-u-d-sm-block ecl-u-d-md-block ecl-u-d-lg-flex ecl-u-ph-xxs ecl-link ecl-link--standalone ecl-u-fs-s"
        ng-class="{'ecl-link--inverted avs-bg-blue-75':day.selected ,'ecl-u-color-blue-120':!day.selected} "
        ng-click="change(day)" ng-repeat="day in days" href="#">{{day.display}}</a>
    </data-owl-carousel>
</div>

<div class="ecl-row">
    <aside class="ecl-col-lg-3  ecl-u-mt-s" role="complementary">
        <div class="ecl-u-d-flex ecl-u-d-lg-none ecl-u-justify-content-between ecl-u-align-items-baseline">
            <h2 class="ecl-heading ecl-heading--h2">Scheduler</h2>
            <button class="ecl-button ecl-button--primary ecl-u-d-lg-none ecl-expandable__button" aria-controls="form-filter" aria-expanded="true" type="button">{{'search.refine_search' | translate}}</button>
        </div>
        <form class="ecl-form ecl-u-d-lg-block" aria-hidden="false" method="get" id="form-filter">
            <fieldset class="ecl-fieldset">
                <div class="ecl-form-group">
                    <label class="ecl-form-label" for="search-option-source">{{'search.keywords' | translate}}</label>
                    <input type="text" class="ecl-text-input" id="example-input-id-1" name="default-name" placeholder="" ng-model="search.kwor"  ng-model-options="{updateOn:'default blur', debounce:{'default':1000, 'blur':0, '*':1000}}"/>
                </div>
                <div class="ecl-form-group">
                    <label class="ecl-form-label" for="search-option-language">{{'label.institution' | translate}}</label>
                    <select class="ecl-select" id="search-option-language" name="language" ng-model="search.institution">
                        <option value="">All</option>
                        <option ng-repeat="inst in listInstitution" value="{{inst.titles_json.EN}}">{{inst.titles_json | translateDB}}</option>
                    </select>
                </div>
                <div class="ecl-form-group">
                    <label class="ecl-form-label" for="search-option-language">{{'ebs.channel' | translate}}</label>
                    <select class="ecl-select" id="search-option-language" name="channel" ng-model="search.channel">
                        <option value="1">{{'1' | displaychannel}}</option>
                        <option value="2">{{'2' | displaychannel}}</option>
                    </select>
                </div>
            </fieldset>
            <div class="ecl-u-mv-m">
                <button class="ecl-button ecl-button--default ecl-button--block ecl-u-mv-s ecl-u-mh-auto" 
                    type="reset" ng-click="reset()">{{'search.clear_all' | translate}}</button>

                <span class="ecl-u-fs-xxs">{{'ebs.all_time_in_cet' | translate}} ({{'ebs.updated_at' | translate}} {{channelDetails().time.substr(8,9)}})</span>
            </div>
        </form>
    </aside>
    
    <section class="ecl-col-lg-9">
        <div class="ecl-row" ng-show="channelDetails().summary.length == 0 && channelDetails().warning.length == 0">{{'ebs.no_programm' | translate}}</div>
        <div class="ecl-row" ng-hide="channelDetails().summary.length == 0 && channelDetails().warning.length == 0">
            <div class="ecl-col">
                <div class="ecl-u-clearfix"></div>
                <!-- plus tot dans la journï¿½e : disable filter -->
                <p ng-show="channelDetails().summary.length - showedProg.length > 0">
                    <button ng-click="filterOn = false;menuExpanded = false;" class="ecl-button ecl-button--primary" ng-class="{'ebs-plus-bg-color': search.channel == 2,'ebs-bg-color': search.channel == 1}" 
                        style="width:100%" ng-show="filterOn">{{'ebs.earlier_in_the_day' | translate}} ({{channelDetails().summary.length - showedProg.length}})</button>
                </p>
                
				<notice-ebs prog="prog" ng-repeat="prog in channelDetails().warning"></notice-ebs>

                <div ng-repeat="prog in channelDetails().summary | filter: {prop:{id:'!8'}} | filter:PassedProg as showedProg">
                	<prog-ebs prog="prog" showthumb="state.current.name != 'language.ebsBoth'" value-institution="search.institution" value-keyword="search.kwor"></prog-ebs>
                </div>
                <hr />
                <!-- remplacer le download du template fourni par digit par un bouton "print" et par un save offline -->
                 <p class="ecl-u-mt-xl ecl-u-mb-none"><strong>{{'headlines.share_this_page' | translate}} </strong></p>

            </div>
           </div>
        </section>

    </div>    

</div>
        <section class="ecl-file ecl-file--video" style="width:0;height:0">
			<avportal-video video="video"
				cloud="isCloud" 
				channel="search.channel" 
				autostart="false" 
				language="lang" 
				sublanguage="sublg" 
				starttime="tin" 
				endtime="tout"
				show-switch-live="true" pip="'1.0'"></avportal-video>
        </section>
